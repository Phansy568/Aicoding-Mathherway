{"ast":null,"code":"var _jsxFileName = \"D:\\\\BaiduSyncdisk\\\\\\u5927\\u5B66\\\\\\u7ADE\\u8D5B\\u3001\\u9879\\u76EE\\\\AI\\u7F16\\u7A0B\\\\frontend\\\\src\\\\components\\\\KnowledgeGraph\\\\index.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport * as d3 from 'd3';\nimport { FiMaximize, FiMinimize } from 'react-icons/fi';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const KnowledgeGraph = ({\n  data,\n  width,\n  height\n}) => {\n  _s();\n  const svgRef = useRef(null);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  useEffect(() => {\n    if (!svgRef.current) return;\n\n    // 清除现有内容\n    d3.select(svgRef.current).selectAll(\"*\").remove();\n    const svg = d3.select(svgRef.current);\n    const g = svg.append(\"g\");\n\n    // 添加缩放功能\n    const zoom = d3.zoom().scaleExtent([0.5, 3]).on(\"zoom\", event => {\n      g.attr(\"transform\", event.transform);\n    });\n    svg.call(zoom);\n\n    // 创建力导向图布局\n    const simulation = d3.forceSimulation(data.nodes).force(\"link\", d3.forceLink(data.edges).id(d => d.id).distance(100)).force(\"charge\", d3.forceManyBody().strength(-200)).force(\"center\", d3.forceCenter(width / 2, height / 2));\n\n    // 定义箭头标记\n    svg.append(\"defs\").selectAll(\"marker\").data([\"Prerequisite\", \"Includes\", \"AppliedIn\", \"AdvancesTo\"]).enter().append(\"marker\").attr(\"id\", d => `arrow-${d}`).attr(\"viewBox\", \"0 -5 10 10\").attr(\"refX\", 28) // 调整箭头位置，使其不覆盖节点\n    .attr(\"refY\", 0).attr(\"markerWidth\", 8).attr(\"markerHeight\", 8).attr(\"orient\", \"auto\").append(\"path\").attr(\"d\", \"M0,-5L10,0L0,5\").attr(\"fill\", d => getEdgeColor(d));\n\n    // 绘制边\n    const edges = g.selectAll(\".edge\").data(data.edges).enter().append(\"g\").attr(\"class\", \"edge\");\n\n    // 添加边的线条\n    edges.append(\"line\").style(\"stroke\", d => getEdgeColor(d.relationship)).style(\"stroke-width\", 2).style(\"stroke-opacity\", 0.6).style(\"stroke-dasharray\", d => getEdgeStyle(d.relationship)).attr(\"marker-end\", d => isDirectedEdge(d.relationship) ? `url(#arrow-${d.relationship})` : \"\");\n\n    // 绘制节点\n    const nodes = g.selectAll(\".node\").data(data.nodes).enter().append(\"g\").attr(\"class\", \"node\").call(d3.drag().on(\"start\", dragStarted).on(\"drag\", dragged).on(\"end\", dragEnded));\n\n    // 添加节点圆形\n    nodes.append(\"circle\").attr(\"r\", 20).style(\"fill\", d => getColorByCategory(d.category));\n\n    // 添加节点文本\n    nodes.append(\"text\").text(d => d.label).attr(\"text-anchor\", \"middle\").attr(\"dy\", 30);\n\n    // 更新力导向图\n    simulation.on(\"tick\", () => {\n      edges.selectAll(\"line\").attr(\"x1\", d => d.source.x).attr(\"y1\", d => d.source.y).attr(\"x2\", d => d.target.x).attr(\"y2\", d => d.target.y);\n      nodes.attr(\"transform\", d => `translate(${d.x},${d.y})`);\n    });\n\n    // 拖拽相关函数\n    function dragStarted(event) {\n      if (!event.active) simulation.alphaTarget(0.3).restart();\n      event.subject.fx = event.subject.x;\n      event.subject.fy = event.subject.y;\n    }\n    function dragged(event) {\n      event.subject.fx = event.x;\n      event.subject.fy = event.y;\n    }\n    function dragEnded(event) {\n      if (!event.active) simulation.alphaTarget(0);\n      event.subject.fx = null;\n      event.subject.fy = null;\n    }\n\n    // 初始缩放以适应屏幕\n    const bounds = g.node().getBBox();\n    const scale = 0.95 / Math.max(bounds.width / width, bounds.height / height);\n    const transform = d3.zoomIdentity.translate(width / 2, height / 2).scale(scale).translate(-bounds.x - bounds.width / 2, -bounds.y - bounds.height / 2);\n    svg.call(zoom.transform, transform);\n  }, [data, width, height]);\n  const toggleFullscreen = () => {\n    const element = document.querySelector('.knowledge-graph');\n    if (!element) return;\n    if (!isFullscreen) {\n      if (element.requestFullscreen) {\n        element.requestFullscreen();\n      }\n    } else {\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      }\n    }\n    setIsFullscreen(!isFullscreen);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"knowledge-graph bg-white rounded-lg shadow p-4 relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: toggleFullscreen,\n      className: \"absolute top-2 right-2 p-2 bg-gray-100 hover:bg-gray-200 rounded-full z-10\",\n      title: isFullscreen ? \"退出全屏\" : \"全屏显示\",\n      children: isFullscreen ? /*#__PURE__*/_jsxDEV(FiMinimize, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(FiMaximize, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 42\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef,\n      width: width,\n      height: height,\n      className: \"cursor-move\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute bottom-2 right-2 bg-white/80 px-2 py-1 rounded text-sm\",\n      children: \"\\u63D0\\u793A\\uFF1A\\u53EF\\u62D6\\u62FD\\u79FB\\u52A8\\uFF0C\\u6EDA\\u8F6E\\u7F29\\u653E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 5\n  }, this);\n};\n\n// 根据知识点类别返回不同颜色\n_s(KnowledgeGraph, \"cQnchwrYB+WP9f7n87cA7amVYFY=\");\n_c = KnowledgeGraph;\nfunction getColorByCategory(category) {\n  const colorMap = {\n    '函数': '#FF6B6B',\n    '几何': '#4ECDC4',\n    '代数': '#45B7D1',\n    '概率统计': '#96CEB4'\n  };\n  return colorMap[category] || '#666';\n}\n\n// 添加辅助函数\nfunction getEdgeColor(relationship) {\n  const colorMap = {\n    'Prerequisite': '#2D3748',\n    'Includes': '#4A5568',\n    'RelatedTo': '#718096',\n    'AppliedIn': '#A0AEC0',\n    'AdvancesTo': '#CBD5E0'\n  };\n  return colorMap[relationship] || '#999';\n}\nfunction getEdgeStyle(relationship) {\n  const styleMap = {\n    'Includes': '5,5',\n    'RelatedTo': '2,2',\n    'default': ''\n  };\n  return styleMap[relationship] || styleMap.default;\n}\nfunction isDirectedEdge(relationship) {\n  const directedTypes = ['Prerequisite', 'Includes', 'AppliedIn', 'AdvancesTo'];\n  return directedTypes.includes(relationship);\n}\nexport default KnowledgeGraph;\nvar _c;\n$RefreshReg$(_c, \"KnowledgeGraph\");","map":{"version":3,"names":["React","useEffect","useRef","useState","d3","FiMaximize","FiMinimize","jsxDEV","_jsxDEV","KnowledgeGraph","data","width","height","_s","svgRef","isFullscreen","setIsFullscreen","current","select","selectAll","remove","svg","g","append","zoom","scaleExtent","on","event","attr","transform","call","simulation","forceSimulation","nodes","force","forceLink","edges","id","d","distance","forceManyBody","strength","forceCenter","enter","getEdgeColor","style","relationship","getEdgeStyle","isDirectedEdge","drag","dragStarted","dragged","dragEnded","getColorByCategory","category","text","label","source","x","y","target","active","alphaTarget","restart","subject","fx","fy","bounds","node","getBBox","scale","Math","max","zoomIdentity","translate","toggleFullscreen","element","document","querySelector","requestFullscreen","exitFullscreen","className","children","onClick","title","fileName","_jsxFileName","lineNumber","columnNumber","ref","_c","colorMap","styleMap","default","directedTypes","includes","$RefreshReg$"],"sources":["D:/BaiduSyncdisk/大学/竞赛、项目/AI编程/frontend/src/components/KnowledgeGraph/index.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport * as d3 from 'd3';\r\nimport { GraphData, KnowledgeNode } from './types';\r\nimport { FiMaximize, FiMinimize } from 'react-icons/fi';\r\n\r\ninterface KnowledgeGraphProps {\r\n  data: GraphData;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\nexport const KnowledgeGraph: React.FC<KnowledgeGraphProps> = ({ data, width, height }) => {\r\n  const svgRef = useRef<SVGSVGElement>(null);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (!svgRef.current) return;\r\n\r\n    // 清除现有内容\r\n    d3.select(svgRef.current).selectAll(\"*\").remove();\r\n\r\n    const svg = d3.select(svgRef.current);\r\n    const g = svg.append(\"g\");\r\n\r\n    // 添加缩放功能\r\n    const zoom = d3.zoom()\r\n      .scaleExtent([0.5, 3])\r\n      .on(\"zoom\", (event) => {\r\n        g.attr(\"transform\", event.transform);\r\n      });\r\n\r\n    svg.call(zoom as any);\r\n\r\n    // 创建力导向图布局\r\n    const simulation = d3.forceSimulation(data.nodes as d3.SimulationNodeDatum[])\r\n      .force(\"link\", d3.forceLink(data.edges)\r\n        .id((d: d3.SimulationNodeDatum) => (d as any).id)\r\n        .distance(100))\r\n      .force(\"charge\", d3.forceManyBody().strength(-200))\r\n      .force(\"center\", d3.forceCenter(width / 2, height / 2));\r\n\r\n    // 定义箭头标记\r\n    svg.append(\"defs\").selectAll(\"marker\")\r\n      .data([\"Prerequisite\", \"Includes\", \"AppliedIn\", \"AdvancesTo\"])\r\n      .enter().append(\"marker\")\r\n      .attr(\"id\", d => `arrow-${d}`)\r\n      .attr(\"viewBox\", \"0 -5 10 10\")\r\n      .attr(\"refX\", 28)  // 调整箭头位置，使其不覆盖节点\r\n      .attr(\"refY\", 0)\r\n      .attr(\"markerWidth\", 8)\r\n      .attr(\"markerHeight\", 8)\r\n      .attr(\"orient\", \"auto\")\r\n      .append(\"path\")\r\n      .attr(\"d\", \"M0,-5L10,0L0,5\")\r\n      .attr(\"fill\", d => getEdgeColor(d));\r\n\r\n    // 绘制边\r\n    const edges = g.selectAll(\".edge\")\r\n      .data(data.edges)\r\n      .enter()\r\n      .append(\"g\")\r\n      .attr(\"class\", \"edge\");\r\n\r\n    // 添加边的线条\r\n    edges.append(\"line\")\r\n      .style(\"stroke\", (d: any) => getEdgeColor(d.relationship))\r\n      .style(\"stroke-width\", 2)\r\n      .style(\"stroke-opacity\", 0.6)\r\n      .style(\"stroke-dasharray\", (d: any) => getEdgeStyle(d.relationship))\r\n      .attr(\"marker-end\", (d: any) => isDirectedEdge(d.relationship) ? \r\n        `url(#arrow-${d.relationship})` : \"\");\r\n\r\n    // 绘制节点\r\n    const nodes = g.selectAll(\".node\")\r\n      .data(data.nodes)\r\n      .enter()\r\n      .append(\"g\")\r\n      .attr(\"class\", \"node\")\r\n      .call(d3.drag<any, any>()\r\n        .on(\"start\", dragStarted)\r\n        .on(\"drag\", dragged)\r\n        .on(\"end\", dragEnded));\r\n\r\n    // 添加节点圆形\r\n    nodes.append(\"circle\")\r\n      .attr(\"r\", 20)\r\n      .style(\"fill\", (d: KnowledgeNode) => getColorByCategory(d.category));\r\n\r\n    // 添加节点文本\r\n    nodes.append(\"text\")\r\n      .text((d: KnowledgeNode) => d.label)\r\n      .attr(\"text-anchor\", \"middle\")\r\n      .attr(\"dy\", 30);\r\n\r\n    // 更新力导向图\r\n    simulation.on(\"tick\", () => {\r\n      edges.selectAll(\"line\")\r\n        .attr(\"x1\", (d: any) => d.source.x)\r\n        .attr(\"y1\", (d: any) => d.source.y)\r\n        .attr(\"x2\", (d: any) => d.target.x)\r\n        .attr(\"y2\", (d: any) => d.target.y);\r\n\r\n      nodes.attr(\"transform\", (d: any) => `translate(${d.x},${d.y})`);\r\n    });\r\n\r\n    // 拖拽相关函数\r\n    function dragStarted(event: any) {\r\n      if (!event.active) simulation.alphaTarget(0.3).restart();\r\n      event.subject.fx = event.subject.x;\r\n      event.subject.fy = event.subject.y;\r\n    }\r\n\r\n    function dragged(event: any) {\r\n      event.subject.fx = event.x;\r\n      event.subject.fy = event.y;\r\n    }\r\n\r\n    function dragEnded(event: any) {\r\n      if (!event.active) simulation.alphaTarget(0);\r\n      event.subject.fx = null;\r\n      event.subject.fy = null;\r\n    }\r\n\r\n    // 初始缩放以适应屏幕\r\n    const bounds = (g.node() as SVGGElement).getBBox();\r\n    const scale = 0.95 / Math.max(bounds.width / width, bounds.height / height);\r\n    const transform = d3.zoomIdentity\r\n      .translate(width / 2, height / 2)\r\n      .scale(scale)\r\n      .translate(-bounds.x - bounds.width / 2, -bounds.y - bounds.height / 2);\r\n    \r\n    svg.call(zoom.transform as any, transform);\r\n\r\n  }, [data, width, height]);\r\n\r\n  const toggleFullscreen = () => {\r\n    const element = document.querySelector('.knowledge-graph');\r\n    if (!element) return;\r\n\r\n    if (!isFullscreen) {\r\n      if (element.requestFullscreen) {\r\n        element.requestFullscreen();\r\n      }\r\n    } else {\r\n      if (document.exitFullscreen) {\r\n        document.exitFullscreen();\r\n      }\r\n    }\r\n    setIsFullscreen(!isFullscreen);\r\n  };\r\n\r\n  return (\r\n    <div className=\"knowledge-graph bg-white rounded-lg shadow p-4 relative\">\r\n      <button\r\n        onClick={toggleFullscreen}\r\n        className=\"absolute top-2 right-2 p-2 bg-gray-100 hover:bg-gray-200 rounded-full z-10\"\r\n        title={isFullscreen ? \"退出全屏\" : \"全屏显示\"}\r\n      >\r\n        {isFullscreen ? <FiMinimize /> : <FiMaximize />}\r\n      </button>\r\n      <svg\r\n        ref={svgRef}\r\n        width={width}\r\n        height={height}\r\n        className=\"cursor-move\"\r\n      />\r\n      <div className=\"absolute bottom-2 right-2 bg-white/80 px-2 py-1 rounded text-sm\">\r\n        提示：可拖拽移动，滚轮缩放\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// 根据知识点类别返回不同颜色\r\nfunction getColorByCategory(category: string): string {\r\n  const colorMap = {\r\n    '函数': '#FF6B6B',\r\n    '几何': '#4ECDC4',\r\n    '代数': '#45B7D1',\r\n    '概率统计': '#96CEB4'\r\n  };\r\n  return colorMap[category as keyof typeof colorMap] || '#666';\r\n}\r\n\r\n// 添加辅助函数\r\nfunction getEdgeColor(relationship: string): string {\r\n  const colorMap: Record<string, string> = {\r\n    'Prerequisite': '#2D3748',\r\n    'Includes': '#4A5568',\r\n    'RelatedTo': '#718096',\r\n    'AppliedIn': '#A0AEC0',\r\n    'AdvancesTo': '#CBD5E0'\r\n  };\r\n  return colorMap[relationship] || '#999';\r\n}\r\n\r\nfunction getEdgeStyle(relationship: string): string {\r\n  const styleMap: Record<string, string> = {\r\n    'Includes': '5,5',\r\n    'RelatedTo': '2,2',\r\n    'default': ''\r\n  };\r\n  return styleMap[relationship] || styleMap.default;\r\n}\r\n\r\nfunction isDirectedEdge(relationship: string): boolean {\r\n  const directedTypes = [\r\n    'Prerequisite',\r\n    'Includes',\r\n    'AppliedIn',\r\n    'AdvancesTo'\r\n  ];\r\n  return directedTypes.includes(relationship);\r\n}\r\n\r\nexport default KnowledgeGraph; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC1D,OAAO,KAAKC,EAAE,MAAM,IAAI;AAExB,SAASC,UAAU,EAAEC,UAAU,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAQxD,OAAO,MAAMC,cAA6C,GAAGA,CAAC;EAAEC,IAAI;EAAEC,KAAK;EAAEC;AAAO,CAAC,KAAK;EAAAC,EAAA;EACxF,MAAMC,MAAM,GAAGZ,MAAM,CAAgB,IAAI,CAAC;EAC1C,MAAM,CAACa,YAAY,EAAEC,eAAe,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAEvDF,SAAS,CAAC,MAAM;IACd,IAAI,CAACa,MAAM,CAACG,OAAO,EAAE;;IAErB;IACAb,EAAE,CAACc,MAAM,CAACJ,MAAM,CAACG,OAAO,CAAC,CAACE,SAAS,CAAC,GAAG,CAAC,CAACC,MAAM,CAAC,CAAC;IAEjD,MAAMC,GAAG,GAAGjB,EAAE,CAACc,MAAM,CAACJ,MAAM,CAACG,OAAO,CAAC;IACrC,MAAMK,CAAC,GAAGD,GAAG,CAACE,MAAM,CAAC,GAAG,CAAC;;IAEzB;IACA,MAAMC,IAAI,GAAGpB,EAAE,CAACoB,IAAI,CAAC,CAAC,CACnBC,WAAW,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CACrBC,EAAE,CAAC,MAAM,EAAGC,KAAK,IAAK;MACrBL,CAAC,CAACM,IAAI,CAAC,WAAW,EAAED,KAAK,CAACE,SAAS,CAAC;IACtC,CAAC,CAAC;IAEJR,GAAG,CAACS,IAAI,CAACN,IAAW,CAAC;;IAErB;IACA,MAAMO,UAAU,GAAG3B,EAAE,CAAC4B,eAAe,CAACtB,IAAI,CAACuB,KAAiC,CAAC,CAC1EC,KAAK,CAAC,MAAM,EAAE9B,EAAE,CAAC+B,SAAS,CAACzB,IAAI,CAAC0B,KAAK,CAAC,CACpCC,EAAE,CAAEC,CAAyB,IAAMA,CAAC,CAASD,EAAE,CAAC,CAChDE,QAAQ,CAAC,GAAG,CAAC,CAAC,CAChBL,KAAK,CAAC,QAAQ,EAAE9B,EAAE,CAACoC,aAAa,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAClDP,KAAK,CAAC,QAAQ,EAAE9B,EAAE,CAACsC,WAAW,CAAC/B,KAAK,GAAG,CAAC,EAAEC,MAAM,GAAG,CAAC,CAAC,CAAC;;IAEzD;IACAS,GAAG,CAACE,MAAM,CAAC,MAAM,CAAC,CAACJ,SAAS,CAAC,QAAQ,CAAC,CACnCT,IAAI,CAAC,CAAC,cAAc,EAAE,UAAU,EAAE,WAAW,EAAE,YAAY,CAAC,CAAC,CAC7DiC,KAAK,CAAC,CAAC,CAACpB,MAAM,CAAC,QAAQ,CAAC,CACxBK,IAAI,CAAC,IAAI,EAAEU,CAAC,IAAI,SAASA,CAAC,EAAE,CAAC,CAC7BV,IAAI,CAAC,SAAS,EAAE,YAAY,CAAC,CAC7BA,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,CAAE;IAAA,CAClBA,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,CACfA,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,CACtBA,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CACvBA,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CACtBL,MAAM,CAAC,MAAM,CAAC,CACdK,IAAI,CAAC,GAAG,EAAE,gBAAgB,CAAC,CAC3BA,IAAI,CAAC,MAAM,EAAEU,CAAC,IAAIM,YAAY,CAACN,CAAC,CAAC,CAAC;;IAErC;IACA,MAAMF,KAAK,GAAGd,CAAC,CAACH,SAAS,CAAC,OAAO,CAAC,CAC/BT,IAAI,CAACA,IAAI,CAAC0B,KAAK,CAAC,CAChBO,KAAK,CAAC,CAAC,CACPpB,MAAM,CAAC,GAAG,CAAC,CACXK,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC;;IAExB;IACAQ,KAAK,CAACb,MAAM,CAAC,MAAM,CAAC,CACjBsB,KAAK,CAAC,QAAQ,EAAGP,CAAM,IAAKM,YAAY,CAACN,CAAC,CAACQ,YAAY,CAAC,CAAC,CACzDD,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC,CACxBA,KAAK,CAAC,gBAAgB,EAAE,GAAG,CAAC,CAC5BA,KAAK,CAAC,kBAAkB,EAAGP,CAAM,IAAKS,YAAY,CAACT,CAAC,CAACQ,YAAY,CAAC,CAAC,CACnElB,IAAI,CAAC,YAAY,EAAGU,CAAM,IAAKU,cAAc,CAACV,CAAC,CAACQ,YAAY,CAAC,GAC5D,cAAcR,CAAC,CAACQ,YAAY,GAAG,GAAG,EAAE,CAAC;;IAEzC;IACA,MAAMb,KAAK,GAAGX,CAAC,CAACH,SAAS,CAAC,OAAO,CAAC,CAC/BT,IAAI,CAACA,IAAI,CAACuB,KAAK,CAAC,CAChBU,KAAK,CAAC,CAAC,CACPpB,MAAM,CAAC,GAAG,CAAC,CACXK,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CACrBE,IAAI,CAAC1B,EAAE,CAAC6C,IAAI,CAAW,CAAC,CACtBvB,EAAE,CAAC,OAAO,EAAEwB,WAAW,CAAC,CACxBxB,EAAE,CAAC,MAAM,EAAEyB,OAAO,CAAC,CACnBzB,EAAE,CAAC,KAAK,EAAE0B,SAAS,CAAC,CAAC;;IAE1B;IACAnB,KAAK,CAACV,MAAM,CAAC,QAAQ,CAAC,CACnBK,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,CACbiB,KAAK,CAAC,MAAM,EAAGP,CAAgB,IAAKe,kBAAkB,CAACf,CAAC,CAACgB,QAAQ,CAAC,CAAC;;IAEtE;IACArB,KAAK,CAACV,MAAM,CAAC,MAAM,CAAC,CACjBgC,IAAI,CAAEjB,CAAgB,IAAKA,CAAC,CAACkB,KAAK,CAAC,CACnC5B,IAAI,CAAC,aAAa,EAAE,QAAQ,CAAC,CAC7BA,IAAI,CAAC,IAAI,EAAE,EAAE,CAAC;;IAEjB;IACAG,UAAU,CAACL,EAAE,CAAC,MAAM,EAAE,MAAM;MAC1BU,KAAK,CAACjB,SAAS,CAAC,MAAM,CAAC,CACpBS,IAAI,CAAC,IAAI,EAAGU,CAAM,IAAKA,CAAC,CAACmB,MAAM,CAACC,CAAC,CAAC,CAClC9B,IAAI,CAAC,IAAI,EAAGU,CAAM,IAAKA,CAAC,CAACmB,MAAM,CAACE,CAAC,CAAC,CAClC/B,IAAI,CAAC,IAAI,EAAGU,CAAM,IAAKA,CAAC,CAACsB,MAAM,CAACF,CAAC,CAAC,CAClC9B,IAAI,CAAC,IAAI,EAAGU,CAAM,IAAKA,CAAC,CAACsB,MAAM,CAACD,CAAC,CAAC;MAErC1B,KAAK,CAACL,IAAI,CAAC,WAAW,EAAGU,CAAM,IAAK,aAAaA,CAAC,CAACoB,CAAC,IAAIpB,CAAC,CAACqB,CAAC,GAAG,CAAC;IACjE,CAAC,CAAC;;IAEF;IACA,SAAST,WAAWA,CAACvB,KAAU,EAAE;MAC/B,IAAI,CAACA,KAAK,CAACkC,MAAM,EAAE9B,UAAU,CAAC+B,WAAW,CAAC,GAAG,CAAC,CAACC,OAAO,CAAC,CAAC;MACxDpC,KAAK,CAACqC,OAAO,CAACC,EAAE,GAAGtC,KAAK,CAACqC,OAAO,CAACN,CAAC;MAClC/B,KAAK,CAACqC,OAAO,CAACE,EAAE,GAAGvC,KAAK,CAACqC,OAAO,CAACL,CAAC;IACpC;IAEA,SAASR,OAAOA,CAACxB,KAAU,EAAE;MAC3BA,KAAK,CAACqC,OAAO,CAACC,EAAE,GAAGtC,KAAK,CAAC+B,CAAC;MAC1B/B,KAAK,CAACqC,OAAO,CAACE,EAAE,GAAGvC,KAAK,CAACgC,CAAC;IAC5B;IAEA,SAASP,SAASA,CAACzB,KAAU,EAAE;MAC7B,IAAI,CAACA,KAAK,CAACkC,MAAM,EAAE9B,UAAU,CAAC+B,WAAW,CAAC,CAAC,CAAC;MAC5CnC,KAAK,CAACqC,OAAO,CAACC,EAAE,GAAG,IAAI;MACvBtC,KAAK,CAACqC,OAAO,CAACE,EAAE,GAAG,IAAI;IACzB;;IAEA;IACA,MAAMC,MAAM,GAAI7C,CAAC,CAAC8C,IAAI,CAAC,CAAC,CAAiBC,OAAO,CAAC,CAAC;IAClD,MAAMC,KAAK,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,CAACL,MAAM,CAACxD,KAAK,GAAGA,KAAK,EAAEwD,MAAM,CAACvD,MAAM,GAAGA,MAAM,CAAC;IAC3E,MAAMiB,SAAS,GAAGzB,EAAE,CAACqE,YAAY,CAC9BC,SAAS,CAAC/D,KAAK,GAAG,CAAC,EAAEC,MAAM,GAAG,CAAC,CAAC,CAChC0D,KAAK,CAACA,KAAK,CAAC,CACZI,SAAS,CAAC,CAACP,MAAM,CAACT,CAAC,GAAGS,MAAM,CAACxD,KAAK,GAAG,CAAC,EAAE,CAACwD,MAAM,CAACR,CAAC,GAAGQ,MAAM,CAACvD,MAAM,GAAG,CAAC,CAAC;IAEzES,GAAG,CAACS,IAAI,CAACN,IAAI,CAACK,SAAS,EAASA,SAAS,CAAC;EAE5C,CAAC,EAAE,CAACnB,IAAI,EAAEC,KAAK,EAAEC,MAAM,CAAC,CAAC;EAEzB,MAAM+D,gBAAgB,GAAGA,CAAA,KAAM;IAC7B,MAAMC,OAAO,GAAGC,QAAQ,CAACC,aAAa,CAAC,kBAAkB,CAAC;IAC1D,IAAI,CAACF,OAAO,EAAE;IAEd,IAAI,CAAC7D,YAAY,EAAE;MACjB,IAAI6D,OAAO,CAACG,iBAAiB,EAAE;QAC7BH,OAAO,CAACG,iBAAiB,CAAC,CAAC;MAC7B;IACF,CAAC,MAAM;MACL,IAAIF,QAAQ,CAACG,cAAc,EAAE;QAC3BH,QAAQ,CAACG,cAAc,CAAC,CAAC;MAC3B;IACF;IACAhE,eAAe,CAAC,CAACD,YAAY,CAAC;EAChC,CAAC;EAED,oBACEP,OAAA;IAAKyE,SAAS,EAAC,yDAAyD;IAAAC,QAAA,gBACtE1E,OAAA;MACE2E,OAAO,EAAER,gBAAiB;MAC1BM,SAAS,EAAC,4EAA4E;MACtFG,KAAK,EAAErE,YAAY,GAAG,MAAM,GAAG,MAAO;MAAAmE,QAAA,EAErCnE,YAAY,gBAAGP,OAAA,CAACF,UAAU;QAAA+E,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,gBAAGhF,OAAA,CAACH,UAAU;QAAAgF,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACzC,CAAC,eACThF,OAAA;MACEiF,GAAG,EAAE3E,MAAO;MACZH,KAAK,EAAEA,KAAM;MACbC,MAAM,EAAEA,MAAO;MACfqE,SAAS,EAAC;IAAa;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACxB,CAAC,eACFhF,OAAA;MAAKyE,SAAS,EAAC,iEAAiE;MAAAC,QAAA,EAAC;IAEjF;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;;AAED;AAAA3E,EAAA,CAlKaJ,cAA6C;AAAAiF,EAAA,GAA7CjF,cAA6C;AAmK1D,SAAS4C,kBAAkBA,CAACC,QAAgB,EAAU;EACpD,MAAMqC,QAAQ,GAAG;IACf,IAAI,EAAE,SAAS;IACf,IAAI,EAAE,SAAS;IACf,IAAI,EAAE,SAAS;IACf,MAAM,EAAE;EACV,CAAC;EACD,OAAOA,QAAQ,CAACrC,QAAQ,CAA0B,IAAI,MAAM;AAC9D;;AAEA;AACA,SAASV,YAAYA,CAACE,YAAoB,EAAU;EAClD,MAAM6C,QAAgC,GAAG;IACvC,cAAc,EAAE,SAAS;IACzB,UAAU,EAAE,SAAS;IACrB,WAAW,EAAE,SAAS;IACtB,WAAW,EAAE,SAAS;IACtB,YAAY,EAAE;EAChB,CAAC;EACD,OAAOA,QAAQ,CAAC7C,YAAY,CAAC,IAAI,MAAM;AACzC;AAEA,SAASC,YAAYA,CAACD,YAAoB,EAAU;EAClD,MAAM8C,QAAgC,GAAG;IACvC,UAAU,EAAE,KAAK;IACjB,WAAW,EAAE,KAAK;IAClB,SAAS,EAAE;EACb,CAAC;EACD,OAAOA,QAAQ,CAAC9C,YAAY,CAAC,IAAI8C,QAAQ,CAACC,OAAO;AACnD;AAEA,SAAS7C,cAAcA,CAACF,YAAoB,EAAW;EACrD,MAAMgD,aAAa,GAAG,CACpB,cAAc,EACd,UAAU,EACV,WAAW,EACX,YAAY,CACb;EACD,OAAOA,aAAa,CAACC,QAAQ,CAACjD,YAAY,CAAC;AAC7C;AAEA,eAAerC,cAAc;AAAC,IAAAiF,EAAA;AAAAM,YAAA,CAAAN,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}